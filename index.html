<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="A 2D car chase game where you control a car to avoid obstacles, collect power-ups, and survive as long as possible." />
        <title>Ultra Racer</title>
        <link rel="stylesheet" href="./src/styles.css" />
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.160.0/three.min.js"></script>
    </head>
    <body class="m-0 bg-[#0a0a14] flex justify-center items-center min-h-screen overflow-hidden font-sans">
        <!-- Start Game Lobby -->
        <div class="fixed flex items-center justify-center z-50 p-4 pointer-events-none" id="startGameEl">
            <div class="w-full h-full max-w-[720px] bg-gradient-to-br from-[#1a1a2e] to-[#16213e] rounded-[32px] border-b-8 border-r-8 border-[#0f3460] shadow-[0_20px_50px_rgba(0,0,0,0.5)] flex flex-col items-center justify-center p-8 text-center pointer-events-auto overflow-hidden">
                <div class="mb-4">
                    <h1 class="text-6xl text-white font-black tracking-tighter mb-1 italic">ULTRA<span class="text-red-500">RACER</span></h1>
                    <div class="h-1.5 w-32 bg-red-500 mx-auto rounded-full"></div>
                </div>
                
                <p class="text-blue-300 mb-4 text-sm font-black tracking-[0.2em] uppercase">High-Speed Survival</p>
                
                <!-- 3D Car Preview Container -->
                <div id="threeJsContainer" class="w-full h-48 mb-6 bg-black/20 rounded-2xl border border-white/5 relative group cursor-grab active:cursor-grabbing">
                    <div class="absolute top-2 right-4 text-[10px] text-white/30 font-bold uppercase tracking-widest">3D Preview</div>
                    <div id="threeJsCanvas" class="w-full h-full"></div>
                </div>

                <!-- Tab Navigation -->
                <div class="flex gap-2 mb-6 w-full max-w-[400px]">
                    <button id="tabTrack" class="flex-1 py-3 bg-[#0f3460] text-white rounded-xl font-bold text-xs uppercase tracking-widest border-2 border-transparent transition-all hover:bg-blue-600/20 active:scale-95">Tracks</button>
                    <button id="tabCar" class="flex-1 py-3 bg-[#0f3460] text-white rounded-xl font-bold text-xs uppercase tracking-widest border-2 border-emerald-500/50 transition-all hover:bg-emerald-600/20 active:scale-95">Garage</button>
                </div>

                <!-- Panels Container -->
                <div class="w-full relative min-h-[160px] mb-8">
                    <!-- Garage Panel (Default) -->
                    <div id="panelCar" class="w-full bg-[#0f3460] bg-opacity-40 p-5 rounded-2xl border border-blue-500/20 shadow-inner">
                        <p class="text-white text-[10px] font-black uppercase tracking-widest mb-4 opacity-50">Select Your Machine</p>
                        <div id="carSelection" class="grid grid-cols-5 gap-2">
                            <button class="car-btn group relative aspect-square bg-[#1a1a2e] rounded-xl border-2 border-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.3)] pointer-events-auto transition-all overflow-hidden" data-car="car1" data-speed="250" data-unlock="0" data-unlocked="true">
                                <img src="public/Cars/car1.png" class="w-full h-full object-contain p-1">
                                <div class="absolute inset-0 bg-emerald-500/10 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                            </button>
                            <button class="car-btn group relative aspect-square bg-[#1a1a2e]/50 rounded-xl border-2 border-white/5 opacity-60 pointer-events-auto transition-all overflow-hidden" data-car="car2" data-speed="300" data-unlock="10000" data-unlocked="false">
                                <img src="public/Cars/car2.png" class="w-full h-full object-contain p-1 grayscale">
                                <div class="absolute inset-0 flex items-center justify-center bg-black/40"><span class="text-[8px] text-white font-bold">10k</span></div>
                            </button>
                            <button class="car-btn group relative aspect-square bg-[#1a1a2e]/50 rounded-xl border-2 border-white/5 opacity-60 pointer-events-auto transition-all overflow-hidden" data-car="car3" data-speed="320" data-unlock="15000" data-unlocked="false">
                                <img src="public/Cars/car3.png" class="w-full h-full object-contain p-1 grayscale">
                                <div class="absolute inset-0 flex items-center justify-center bg-black/40"><span class="text-[8px] text-white font-bold">15k</span></div>
                            </button>
                            <button class="car-btn group relative aspect-square bg-[#1a1a2e]/50 rounded-xl border-2 border-white/5 opacity-60 pointer-events-auto transition-all overflow-hidden" data-car="car4" data-speed="350" data-unlock="50000" data-unlocked="false">
                                <img src="public/Cars/car4.png" class="w-full h-full object-contain p-1 grayscale">
                                <div class="absolute inset-0 flex items-center justify-center bg-black/40"><span class="text-[8px] text-white font-bold">50k</span></div>
                            </button>
                            <button class="car-btn group relative aspect-square bg-[#1a1a2e]/50 rounded-xl border-2 border-white/5 opacity-60 pointer-events-auto transition-all overflow-hidden" data-car="car5" data-speed="380" data-unlock="100000" data-unlocked="false">
                                <img src="public/Cars/car5.png" class="w-full h-full object-contain p-1 grayscale">
                                <div class="absolute inset-0 flex items-center justify-center bg-black/40"><span class="text-[8px] text-white font-bold">100k</span></div>
                            </button>
                        </div>
                    </div>

                    <!-- Track Panel (Hidden) -->
                    <div id="panelTrack" class="hidden w-full bg-[#0f3460] bg-opacity-40 p-5 rounded-2xl border border-blue-500/20 shadow-inner">
                        <p class="text-white text-[10px] font-black uppercase tracking-widest mb-4 opacity-50">Select Destination</p>
                        <div id="roadSelection" class="grid grid-cols-2 gap-3">
                            <button class="road-btn group relative h-24 overflow-hidden bg-[#1a1a2e] rounded-xl border-2 border-emerald-500 shadow-[0_0_15px_rgba(16,185,129,0.3)] pointer-events-auto transition-all" data-road="default" data-unlocked="true">
                                <img src="public/Background/background.png" class="absolute inset-0 w-full h-full object-cover opacity-40 group-hover:scale-110 transition-transform">
                                <span class="relative z-10 font-black italic tracking-tighter text-sm text-white">HIGHWAY</span>
                                <div class="absolute inset-0 bg-emerald-500/10 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                            </button>
                            <button class="road-btn group relative h-24 overflow-hidden bg-[#1a1a2e]/50 rounded-xl border-2 border-white/5 opacity-60 pointer-events-auto transition-all" data-road="autumn" data-unlocked="false" data-distance="7000">
                                <img src="public/Roads/autumn.png" class="absolute inset-0 w-full h-full object-cover opacity-40 group-hover:scale-110 transition-transform grayscale">
                                <div class="relative z-10 flex flex-col items-center">
                                    <span class="font-black italic tracking-tighter text-sm text-white">AUTUMN</span>
                                    <span class="text-[8px] font-bold text-white/50">(7000m)</span>
                                </div>
                            </button>
                            <button class="road-btn group relative h-24 overflow-hidden bg-[#1a1a2e]/50 rounded-xl border-2 border-white/5 opacity-60 pointer-events-auto transition-all" data-road="winter" data-unlocked="false" data-distance="15000">
                                <img src="public/Roads/winter.png" class="absolute inset-0 w-full h-full object-cover opacity-40 group-hover:scale-110 transition-transform grayscale">
                                <div class="relative z-10 flex flex-col items-center">
                                    <span class="font-black italic tracking-tighter text-sm text-white">WINTER</span>
                                    <span class="text-[8px] font-bold text-white/50">(15000m)</span>
                                </div>
                            </button>
                            <button class="road-btn group relative h-24 overflow-hidden bg-[#1a1a2e]/50 rounded-xl border-2 border-white/5 opacity-60 pointer-events-auto transition-all" data-road="desert" data-unlocked="false" data-distance="30000">
                                <img src="public/Roads/desert.png" class="absolute inset-0 w-full h-full object-cover opacity-40 group-hover:scale-110 transition-transform grayscale">
                                <div class="relative z-10 flex flex-col items-center">
                                    <span class="font-black italic tracking-tighter text-sm text-white">DESERT</span>
                                    <span class="text-[8px] font-bold text-white/50">(30000m)</span>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>

                <button id="startGameBtn" class="w-full max-w-[320px] py-6 bg-gradient-to-r from-red-600 to-orange-500 text-white rounded-3xl font-black text-3xl uppercase tracking-widest shadow-[0_15px_30px_rgba(239,68,68,0.4)] active:scale-95 active:shadow-none transition-all border-b-8 border-red-800">START RACE</button>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div class="fixed flex items-center justify-center z-50 p-4 hidden pointer-events-none" id="restartGameEl">
            <div class="w-full h-full max-w-[720px] bg-gradient-to-b from-[#1a1a2e] to-[#0f3460] rounded-[32px] border-4 border-red-600/50 shadow-2xl flex flex-col items-center justify-center p-8 text-center pointer-events-auto backdrop-blur-sm">
                <h2 class="text-5xl text-red-500 font-black mb-2 italic">WASTED</h2>
                <div class="h-1 w-32 bg-red-600 mb-8 rounded-full"></div>

                <div class="grid grid-cols-2 gap-4 w-full mb-10">
                    <div class="bg-black/30 p-4 rounded-2xl border border-white/5">
                        <p class="text-white/50 text-[10px] uppercase font-bold mb-1">Score</p>
                        <p class="text-2xl text-white font-black" id="scoreEl">0</p>
                    </div>
                    <div class="bg-black/30 p-4 rounded-2xl border border-white/5">
                        <p class="text-white/50 text-[10px] uppercase font-bold mb-1">Distance</p>
                        <p class="text-2xl text-white font-black"><span id="metersEl">0</span>m</p>
                    </div>
                    <div class="bg-black/30 p-4 rounded-2xl border border-white/5">
                        <p class="text-white/50 text-[10px] uppercase font-bold mb-1">Best Score</p>
                        <p class="text-lg text-emerald-400 font-bold" id="highScoreEl">0</p>
                    </div>
                    <div class="bg-black/30 p-4 rounded-2xl border border-white/5">
                        <p class="text-white/50 text-[10px] uppercase font-bold mb-1">Best Distance</p>
                        <p class="text-lg text-emerald-400 font-bold"><span id="bestMetersEl">0</span>m</p>
                    </div>
                </div>

                <div class="flex flex-col gap-4 w-full max-w-[320px]">
                    <button id="restartGameBtn" class="w-full py-5 bg-white text-[#1a1a2e] rounded-2xl font-black text-xl uppercase tracking-wider shadow-xl active:scale-95 transition-all">TRY AGAIN</button>
                    <button id="backToLobbyBtn" class="w-full py-4 bg-transparent text-white/70 rounded-2xl font-bold text-lg uppercase border-2 border-white/10 active:scale-95 transition-all hover:bg-white/5">GARAGE</button>
                </div>
            </div>
        </div>

        <canvas id="canvas" class="bg-slate-900 shadow-[0_0_100px_rgba(0,0,0,0.8)] rounded-lg"></canvas>

        <!-- On-Screen Controls -->
        <div id="gameControls" class="fixed inset-0 pointer-events-none hidden select-none">
            <!-- Centered Controls -->
            <div class="absolute bottom-12 left-1/2 -translate-x-1/2 flex items-center gap-6 pointer-events-auto">
                <!-- D-Pad -->
                <div class="relative w-40 h-40 bg-white/10 rounded-3xl border border-white/10 shadow-2xl p-2 grid grid-cols-3 grid-rows-3 gap-2">
                    <button id="btnUp" class="col-start-2 bg-white/10 hover:bg-white/20 active:bg-white/30 rounded-xl flex items-center justify-center text-white shadow-inner transition-colors">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 15l7-7 7 7"></path></svg>
                    </button>
                    <button id="btnLeft" class="row-start-2 bg-white/10 hover:bg-white/20 active:bg-white/30 rounded-xl flex items-center justify-center text-white shadow-inner transition-colors">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M15 19l-7-7 7-7"></path></svg>
                    </button>
                    <button id="btnDown" class="row-start-3 col-start-2 bg-white/10 hover:bg-white/20 active:bg-white/30 rounded-xl flex items-center justify-center text-white shadow-inner transition-colors">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <button id="btnRight" class="row-start-2 col-start-3 bg-white/10 hover:bg-white/20 active:bg-white/30 rounded-xl flex items-center justify-center text-white shadow-inner transition-colors">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M9 5l7 7-7 7"></path></svg>
                    </button>
                </div>

                <!-- Small Jump Button to the Right -->
                <button id="btnJump" class="w-24 h-24 bg-gradient-to-tr from-red-600 to-orange-500 rounded-full flex flex-col items-center justify-center text-white shadow-lg border-2 border-white/20 active:scale-90 transition-all group overflow-hidden">
                    <span class="font-black text-lg tracking-tighter italic">JUMP</span>
                    <div class="w-8 h-1 bg-white/30 rounded-full mt-1"></div>
                </button>
            </div>
        </div>
        <img src="./public/Bezel/bezel.png" id="bezel" class="hidden" />
        <img src="./public/Player/player.png" id="player" class="hidden" />
        <img src="./public/Enemies/Car.png" id="car" class="hidden" />
        <img src="./public/Enemies/Taxi.png" id="taxi" class="hidden" />
        <img src="./public/Enemies/Audi.png" id="audi" class="hidden" />
        <img src="./public/Other/GasCan.png" id="gasCan" class="hidden" />
        <img src="./public/Enemies/Truck.png" id="truck" class="hidden" />
        <img src="./public/Other/Health.png" id="health" class="hidden" />
        <img src="./public/Enemies/Police.png" id="police" class="hidden" />
        <img src="./public/Enemies/MiniVan.png" id="miniVan" class="hidden" />
        <img src="./public/Other/Explosion.png" id="explosion" class="hidden" />
        <img src="./public/Enemies/Ambulance.png" id="ambulance" class="hidden" />
        <img src="./public/Enemies/MiniTruck.png" id="miniTruck" class="hidden" />
        <img src="./public/Background/background.png" id="background" class="hidden" />
        <img src="./public/Roads/autumn.png" id="road_autumn" class="hidden" />
        <img src="./public/Roads/winter.png" id="road_winter" class="hidden" />
        <img src="./public/Roads/desert.png" id="road_desert" class="hidden" />
        <script src="./src/script.js"></script>
    </body>
</html>